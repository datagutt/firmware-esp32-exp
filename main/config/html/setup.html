<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>Tronbyt Setup</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#07080c;--surface:#0d1017;--surface-alt:#111722;
  --border:#1c2333;--border-bright:#2a3347;
  --text:#c9d1d9;--text-bright:#f0f2f5;--text-muted:#5c6370;
  --accent:#00d4ff;--accent-dim:#0891b2;
  --accent-glow:rgba(0,212,255,0.12);--accent-glow-md:rgba(0,212,255,0.25);
  --success:#34d399;--danger:#f87171;
  --mono:"SF Mono","Cascadia Code","JetBrains Mono",Menlo,Consolas,monospace;
  --sans:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
}
::selection{background:var(--accent-glow-md);color:var(--text-bright)}
body{
  font-family:var(--sans);background:var(--bg);color:var(--text);
  line-height:1.6;min-height:100vh;-webkit-font-smoothing:antialiased;
  background-image:radial-gradient(ellipse at 50%% 0%%,rgba(0,212,255,0.03) 0%%,transparent 60%%);
}
body::before{
  content:'';position:fixed;top:0;left:0;right:0;height:2px;z-index:100;opacity:.7;
  background:linear-gradient(90deg,transparent,var(--accent) 50%%,transparent);
}
.wrap{max-width:440px;margin:0 auto;padding:1.25rem;padding-top:.5rem}
.brand{font-family:var(--mono);font-size:1.125rem;font-weight:700;color:var(--accent);letter-spacing:.1em;text-transform:uppercase;padding:1rem 0}
.brand span{color:var(--text-muted);font-weight:400;font-size:.8125rem;letter-spacing:.04em;margin-left:.5rem;text-transform:none}
.card{
  background:var(--surface);border:1px solid var(--border);border-radius:8px;
  padding:1.25rem;margin-bottom:.875rem;position:relative;
  animation:cardIn .4s ease both;transition:border-color .2s;
}
.card:nth-child(3){animation-delay:.05s}
.card::before{
  content:'';position:absolute;top:-1px;left:1.5rem;right:1.5rem;height:1px;
  background:linear-gradient(90deg,transparent,var(--accent-glow-md),transparent);border-radius:1px;
}
.card:hover{border-color:var(--border-bright)}
.card h2{
  font-family:var(--mono);font-size:.6875rem;font-weight:600;
  text-transform:uppercase;letter-spacing:.1em;color:var(--text-muted);
  margin-bottom:.875rem;padding-left:.75rem;border-left:2px solid var(--accent);
}
.form-group{margin-bottom:1rem}
.form-group label{display:block;font-size:.8125rem;font-weight:500;color:var(--text-muted);margin-bottom:.375rem}
.form-group input[type='text'],
.form-group input[type='password']{
  width:100%%;padding:.625rem .75rem;background:var(--bg);
  border:1px solid var(--border);border-radius:6px;color:var(--text-bright);
  font-family:var(--mono);font-size:.8125rem;outline:none;
  transition:border-color .2s,box-shadow .2s;
}
.form-group input:focus{border-color:var(--accent-dim);box-shadow:0 0 0 3px var(--accent-glow)}
.form-group input::placeholder{color:var(--text-muted);opacity:.5}
input[type='checkbox']{accent-color:var(--accent);margin-right:.375rem;vertical-align:middle}
input[type='file']{font-family:var(--sans);font-size:.8125rem;color:var(--text)}
input[type='file']::file-selector-button{
  font-family:var(--sans);font-size:.8125rem;font-weight:500;
  padding:.5rem .875rem;border:1px solid var(--border);border-radius:6px;
  background:var(--surface-alt);color:var(--text);cursor:pointer;margin-right:.75rem;
  transition:border-color .2s,background .2s;
}
input[type='file']::file-selector-button:hover{border-color:var(--accent-dim);background:var(--surface)}
.hint{font-size:.6875rem;color:var(--text-muted);margin-top:.25rem}
button{
  display:inline-flex;align-items:center;justify-content:center;
  padding:.5rem 1.125rem;border:1px solid var(--accent);border-radius:6px;
  background:var(--accent-dim);color:#fff;font-family:var(--sans);
  font-size:.8125rem;font-weight:600;cursor:pointer;transition:all .2s;
}
button:hover{background:var(--accent);color:var(--bg);box-shadow:0 0 16px var(--accent-glow-md)}
button:disabled{opacity:.5;cursor:not-allowed}
.progress{font-family:var(--mono);font-size:.75rem;color:var(--text-muted);margin-top:.5rem}
@keyframes cardIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>
<div class='wrap'>
<div class='brand'>Tronbyt <span>Setup</span></div>
<div class='card'>
<h2>Wi-Fi Network</h2>
<form action='/save' method='post' enctype='application/x-www-form-urlencoded'>
<div class='form-group'>
<label for='ssid'>Network Name</label>
<input type='text' id='ssid' name='ssid' maxlength='32' placeholder='Your Wi-Fi SSID'>
<div class='hint'>2.4 GHz networks only</div>
</div>
<div class='form-group'>
<label for='password'>Password</label>
<input type='password' id='password' name='password' maxlength='64'>
</div>
<div class='form-group'>
<label for='image_url'>Image URL</label>
<input type='text' id='image_url' name='image_url' maxlength='128' value='%s'>
</div>
<div class='form-group'>
<label for='api_key'>API Key</label>
<input type='text' id='api_key' name='api_key' maxlength='128' value='%s'>
<div class='hint'>Optional</div>
</div>%s
<button type='submit'>Save &amp; Connect</button>
</form>
</div>
<div class='card'>
<h2>Firmware Update</h2>
<div class='form-group'>
<input type='file' id='fw_file' accept='.bin'>
</div>
<button id='upd_btn' onclick='uploadFirmware()'>Update Firmware</button>
<div id='progress' class='progress'></div>
</div>
</div>
<script>
function uploadFirmware(){
  var f=document.getElementById('fw_file').files[0];
  if(!f){alert('Select a .bin file first');return}
  var b=document.getElementById('upd_btn');
  b.disabled=true;b.innerText='Uploading...';
  var x=new XMLHttpRequest();
  x.open('POST','/update',true);
  x.upload.onprogress=function(e){
    if(e.lengthComputable){
      document.getElementById('progress').innerText='Upload: '+((e.loaded/e.total)*100).toFixed(0)+'%%';
    }
  };
  x.onload=function(){
    if(x.status==200){
      document.getElementById('progress').innerText='Success! Rebooting...';
    }else{
      document.getElementById('progress').innerText='Failed: '+x.statusText;
      b.disabled=false;b.innerText='Update Firmware';
    }
  };
  x.onerror=function(){
    document.getElementById('progress').innerText='Upload error';
    b.disabled=false;b.innerText='Update Firmware';
  };
  x.send(f);
}
</script>
</body>
</html>
